# 海战指挥系统 - 界面布局设计文档

## 概述
本文档描述了海战指挥系统的用户界面布局设计，采用军事仿真风格，提供专业的指挥控制体验。

## 整体布局结构

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            顶部状态栏 (TOP_BAR_HEIGHT: 50px)                      │
│  海战指挥系统  │  时间: 00:05:07  │  选中: 0个单位  │  攻击模式: 关闭  │  [视图][控制][单位][帮助]  │
├─────────────────────────────────────────────────────────────┬───────────────────┤
│                                                           │   战术地图          │
│                                                           │  ┌─────────────────┐ │
│                                                           │  │                 │ │
│                                                           │  │   小地图区域      │ │
│                                                           │  │   (180x135)     │ │·
│                                                           │  │                 │ │
│                                                           │  └─────────────────┘ │
│                                                           │                     │
│                        主视图区域                           │    右侧信息面板      │
│                     (海图显示区域)                          │  (RIGHT_PANEL_WIDTH │
│                                                           │      : 200px)      │
│                                                           │                     │
│                                                           │  ┌─────────────────┐ │
│                                                           │  │   单位控制       │ │
│                                                           │  ├─────────────────┤ │
│                                                           │  │ 单位信息显示区域  │ │
│                                                           │  │ - 类型: 驱逐舰    │ │
│                                                           │  │ - HP: 100%      │ │
│                                                           │  │ - 速度: 15节     │ │
│                                                           │  ├─────────────────┤ │
│                                                           │  │ [攻击模式]       │ │
│                                                           │  │ [停止] [速度]    │ │
│                                                           │  │ [右转] [传感器]   │ │
│                                                           │  │ [攻击最近]       │ │
│                                                           │  └─────────────────┘ │
├───────────────────────────────────────────────────────────┴───────────────────┤
│                          底部控制栏 (BOTTOM_BAR_HEIGHT: 60px)                    │
│  [⏸] [⏪] [⏩] [🔄]  │  ═══════════════════════════════  │  速度: x1.0         │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 可选左侧面板 (当启用时)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            顶部状态栏 (TOP_BAR_HEIGHT: 50px)                      │
├─────────────┬───────────────────────────────────────────────┬───────────────────┤
│  左侧面板    │                                             │   战术地图          │
│ (LEFT_PANEL │                                             │                     │
│ _WIDTH:150) │                                             │    右侧信息面板      │
│             │                    主视图区域                 │                     │
│ ┌─────────┐ │                 (海图显示区域)               │                     │
│ │事件日志  │ │                                             │                     │
│ ├─────────┤ │                                             │                     │
│ │系统启动  │ │                                             │                     │
│ │地图加载  │ │                                             │                     │
│ │单位初始化│ │                                             │                     │
│ │等待指令  │ │                                             │                     │
│ └─────────┘ │                                             │                     │
├─────────────┴───────────────────────────────────────────────┴───────────────────┤
│                          底部控制栏 (BOTTOM_BAR_HEIGHT: 60px)                    │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 详细组件规格

### 1. 顶部状态栏 (Top Status Bar)
- **位置**: (0, 0)
- **尺寸**: 全屏宽度 × 50px
- **背景色**: RGB(20, 35, 60) - 深蓝色
- **边框色**: RGB(40, 60, 100)
- **内容**:
  - 游戏标题: "海战指挥系统"
  - 当前时间显示
  - 选中单位数量
  - 攻击模式状态
  - 功能按钮组: [视图] [控制] [单位] [帮助]

### 2. 右侧信息面板 (Right Panel)
- **位置**: (screen_width - 200, 50)
- **尺寸**: 200px × (screen_height - 110)
- **背景色**: RGB(15, 25, 40)
- **边框色**: RGB(40, 60, 80)
- **内容**:
  - 标题: "单位控制"
  - 单位信息显示区域 (最多8个单位)
  - 单位控制按钮组

### 3. 底部控制栏 (Bottom Control Bar)
- **位置**: (0, screen_height - 60)
- **尺寸**: 全屏宽度 × 60px
- **背景色**: RGB(20, 35, 60)
- **边框色**: RGB(40, 60, 100)
- **内容**:
  - 播放控制按钮: 暂停、快退、快进、重置
  - 时间轴显示
  - 游戏速度指示器

### 4. 战术地图 (Minimap)
- **位置**: (screen_width - 195, 60) - 右上角
- **尺寸**: 180px × 135px
- **背景色**: RGB(8, 15, 25)
- **边框色**: RGB(40, 60, 80)
- **特性**:
  - 海洋颜色: RGB(15, 35, 60)
  - 陆地颜色: RGB(25, 40, 15)
  - 友方单位: 蓝色圆形
  - 敌方单位: 红色方形
  - 选中单位: 黄色高亮边框
  - 视窗指示器: 黄色矩形框

### 5. 主视图区域 (Main View Area)
- **位置**: 根据左侧面板状态动态计算
  - 无左侧面板: (0, 50)
  - 有左侧面板: (150, 50)
- **尺寸**: 
  - 宽度: screen_width - right_panel_width - left_panel_width
  - 高度: screen_height - top_bar_height - bottom_bar_height
- **功能**: 显示海图、单位、地形等游戏内容

### 6. 左侧信息面板 (Left Panel) - 可选
- **位置**: (0, 50)
- **尺寸**: 150px × (screen_height - 110)
- **背景色**: RGB(15, 25, 40)
- **边框色**: RGB(40, 60, 80)
- **内容**: 事件日志、系统消息等

## 按钮样式规范

### 现代化按钮设计
- **默认状态**: 
  - 背景: RGB(30, 50, 80)
  - 边框: RGB(60, 90, 120)
  - 文字: RGB(200, 200, 200)
- **悬停状态**:
  - 背景: RGB(40, 70, 110)
  - 边框: RGB(80, 120, 160)
  - 文字: RGB(255, 255, 255)
- **按下状态**:
  - 背景: RGB(20, 35, 60)
  - 边框: RGB(40, 60, 100)

### 按钮组布局

#### 顶部工具栏按钮
```
[视图] [控制] [单位] [帮助]
```

#### 右侧单位控制按钮
```
[攻击模式]
[停止] [速度+/-]
[右转] [传感器]
[攻击最近]
```

#### 底部播放控制按钮
```
[⏸暂停] [⏪减速] [⏩加速] [🔄重置]
```

## 颜色主题

### 主要颜色
- **深蓝色背景**: RGB(15, 25, 45) - 主背景
- **状态栏蓝**: RGB(20, 35, 60) - 顶部和底部栏
- **面板蓝**: RGB(15, 25, 40) - 侧边面板
- **边框蓝**: RGB(40, 60, 80) - 边框和分割线

### 功能颜色
- **友方单位**: RGB(60, 150, 255) - 蓝色
- **敌方单位**: RGB(255, 60, 60) - 红色
- **选中高亮**: RGB(255, 255, 0) - 黄色
- **文字主色**: RGB(200, 200, 200) - 浅灰
- **文字高亮**: RGB(255, 255, 255) - 白色

## 交互设计

### 鼠标操作
- **左键单击**: 选择单位
- **Ctrl+左键**: 多选单位
- **右键单击**: 移动/攻击指令
- **小地图点击**: 摄像机导航

### 键盘快捷键
- **空格**: 暂停/继续
- **+/-**: 调整游戏速度
- **ESC**: 取消选择
- **Tab**: 切换界面显示

## 响应式设计

### 最小分辨率支持
- **最小宽度**: 1024px
- **最小高度**: 768px
- **推荐分辨率**: 1920×1080

### 自适应规则
1. 主视图区域根据屏幕尺寸自动调整
2. 侧边面板保持固定宽度
3. 按钮尺寸根据面板宽度等比缩放
4. 文字大小保持可读性

## 实现文件

### 主要实现文件
- `src/render/single_process.py` - 主渲染管理器
- `src/ui/font_loader.py` - 字体加载
- `src/ui/player.py` - 玩家交互

### 关键方法
- `_init_ui_components()` - UI组件初始化
- `draw_top_status_bar()` - 顶部状态栏绘制
- `draw_right_panel()` - 右侧面板绘制
- `draw_bottom_control_bar()` - 底部控制栏绘制
- `draw_minimap()` - 小地图绘制
- `draw_modern_buttons()` - 现代化按钮绘制
- `handle_events()` - 事件处理

## 扩展性考虑

### 未来可添加功能
1. **缩放控制**: 在视图菜单中添加缩放选项
2. **显示模式**: 切换不同的地图显示模式
3. **调试面板**: 开发者调试信息显示
4. **多语言支持**: 界面文字本地化
5. **主题切换**: 不同的颜色主题选择

### 模块化设计
- 每个UI组件独立绘制方法
- 统一的事件处理系统
- 可配置的布局参数
- 分离的样式定义

---

*本文档版本: 1.0*  
*最后更新: 2024年*  
*维护者: 海战指挥系统开发团队*